yum -y install  gcc gcc-c++ gcc-g77 autoconf automake zlib* fiex* libxml* ncurses-devel libmcrypt* libtool-ltdl-devel* make cmake

groupadd mysql
useradd -r -g mysql mysql

cmake . \
-DCMAKE_INSTALL_PREFIX=/usr/local/percona-server-5.6.32-78.1 \
-DMYSQL_DATADIR=/usr/local/percona-server-5.6.32-78.1/data \
-DSYSCONFDIR=/etc \
-DWITH_MYISAM_STORAGE_ENGINE=1 \
-DWITH_INNOBASE_STORAGE_ENGINE=1 \
-DWITH_MEMORY_STORAGE_ENGINE=1 \
-DMYSQL_UNIX_ADDR=/var/lib/mysql/mysql.sock \
-DMYSQL_TCP_PORT=3306 \
-DENABLED_LOCAL_INFILE=1 \
-DWITH_PARTITION_STORAGE_ENGINE=1 \
-DEXTRA_CHARSETS=all \
-DDEFAULT_CHARSET=utf8 \
-DWITH_READLINE=off \
-DWITH_EDITLINE=bundled \
-DDEFAULT_COLLATION=utf8_general_ci

make -j8 && make install
chown -R mysql:mysql /usr/local/percona-server-5.6.32-78.1
scripts/mysql_install_db --basedir=/usr/local/percona-server-5.6.32-78.1 --datadir=/usr/local/percona-server-5.6.32-78.1/data --user=mysql

/usr/local/percona-server-5.6.32-78.1/bin/mysqld_safe --defaults-file=/usr/local/percona-server-5.6.32-78.1/etc/my4306.cnf --user=mysql &

修改/etc/profile文件，在文件末尾添加
PATH=/usr/local/percona-server-5.6.32-78.1/bin:$PATH
export PATH
source /etc/profile

mysql -uroot  
mysql> SET PASSWORD = PASSWORD('rootpass');
GRANT ALL PRIVILEGES ON *.* TO 'root'@'10.0.56.%' IDENTIFIED BY 'rootpass' WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' IDENTIFIED BY 'rootpass' WITH GRANT OPTION;

[client]
default-character-set         = utf8mb4
port                          = 4306
socket                        = /usr/local/percona-server-5.6.32-78.1/mysql.sock

[mysqld]
user                          = mysql
port                          = 4306
extra-port                    = 7306
character_set_server          = utf8mb4
server_id                     = 568701
socket                        = /usr/local/percona-server-5.6.32-78.1/mysql.sock
basedir                       = /usr/local/percona-server-5.6.32-78.1
datadir                       = /usr/local/percona-server-5.6.32-78.1/data
log-error                     = /usr/local/percona-server-5.6.32-78.1/log/alert.log
pid-file                      = /usr/local/percona-server-5.6.32-78.1/mysql.pid
log_slave_updates             = 1
log-bin                       = /usr/local/percona-server-5.6.32-78.1/log/mysql-bin
binlog_format                 = row
binlog_cache_size             = 2M
max_binlog_cache_size         = 256M
max_binlog_size               = 256M
expire_logs_days              = 7
relay-log                     = /usr/local/percona-server-5.6.32-78.1/log/relay-bin
relay-log-index               = /usr/local/percona-server-5.6.32-78.1/relay-log.index
master-info-repository        = TABLE
relay-log-info-repository     = TABLE
relay-log-recovery            = true
sync-relay-log-info           = 1
explicit_defaults_for_timestamp
key_buffer_size               = 2M
sort_buffer_size              = 2M
read_buffer_size              = 2M
read_rnd_buffer_size          = 16M
join_buffer_size              = 2M
thread_cache_size             = 1024
query_cache_size              = 1M
query_cache_limit             = 1M
query_cache_min_res_unit      = 2k
table_open_cache              = 2048
open_files_limit              = 65535
back_log                      = 3000
max_connections               = 4000
max_user_connections          = 2500
max_connect_errors            = 100
max_allowed_packet            = 512M
thread_stack                  = 192k
default-storage-engine        = INNODB
transaction_isolation         = READ-COMMITTED
tmp_table_size                = 16M
max_heap_table_size           = 64M
bulk_insert_buffer_size       = 64M
long_query_time               = 0.5
slow_query_log                = on
slow_query_log_file           = /usr/local/percona-server-5.6.32-78.1/log/slow.log
skip-name-resolve
innodb_buffer_pool_size       = 256M
innodb_data_file_path         = ibdata1:2G:autoextend
innodb_file_io_threads        = 24
innodb_purge_threads          = 12
innodb_read_io_threads        = 24
innodb_write_io_threads       = 24
innodb_thread_concurrency     = 24
innodb_buffer_pool_instances  = 8
innodb_flush_log_at_trx_commit= 1
innodb_log_buffer_size        = 16M
innodb_log_file_size          = 256M
innodb_log_files_in_group     = 2
innodb_max_dirty_pages_pct    = 75
innodb_lock_wait_timeout      = 50
innodb_file_per_table         = 1
thread_handling               = pool-of-threads
thread_pool_idle_timeout      = 180
thread_pool_max_threads       = 5000
thread_pool_size              = 24
thread_pool_oversubscribe     = 10
thread_pool_stall_limit       = 500
[mysqldump]
quick
max_allow_packet              = 64M
[mysql]
no-auto-rehash
[mysqlhotcopy]
interactive-timeout